import{r as u,n as c,b as o,d as r,e as p,h as k,o as w,c as x,w as C,v as _,f as i,a as m,m as y,g as E,i as F}from"./index-BDd4kXsD.js";const V={class:"flex flex-col overflow-auto"},A={class:"flex justify-center mb-3"},q={class:"table-bar flex justify-between items-center mb-3"},T={__name:"baseTable",setup(B){const n=u({ref:null,show:!1,model:{name:"",age:"",email:"",date:""},items:[{label:"姓名",prop:"name"},{label:"年龄",prop:"age",slot:"agel-select",attrs:{options:["12","13"],onChange:t=>{console.log(t)}}},{label:"邮件",prop:"email"},{label:"出生日期",prop:"date",slot:"el-date-picker",attrs:{type:"datetime"}}]}),e=u({ref:null,show:!1,title:"",state:"edit",model:{name:"",age:"",date:"",email:"",decs:""},items:[{label:"姓名",prop:"name",required:!0},{label:"年龄",prop:"age",required:!0},{label:"出生日期",prop:"date",slot:"el-date-picker"},{label:"邮件",span:3,prop:"email"},{label:"介绍",prop:"decs",span:3,attrs:{type:"textarea",rows:5}}],toAdd:()=>{e.show=!0,e.title="新增用户",e.state="add",c(()=>{var t;(t=e.ref)==null||t.resetFields()})},toEdit:t=>{e.show=!0,e.title="编辑用户资料",e.state="edit",c(()=>{e.model={...t}})},toView:t=>{e.show=!0,e.title="查看用户资料",e.state="view",c(()=>{e.model={...t}})},submit:()=>{var t;(t=e.ref)==null||t.validate().then(()=>{e.show=!1,a.request()})}}),a=u({loading:!1,border:!0,data:[],page:{sortOrder:null,sortProp:"",currentPage:1,pageSize:10,total:0},columns:[{label:"#",type:"selection"},{label:"姓名",prop:"name",sortable:"custom",width:100},{label:"年龄",prop:"age",sortable:"custom",width:100},{label:"邮件",prop:"email",width:250},{label:"出生日期",prop:"date",width:150},{label:"介绍",prop:"decs",showOverflowTooltip:!0},{width:"120px",label:"操作",fixed:"right",slot:t=>o("div",null,[o(r("el-button"),{link:!0,type:"primary",onClick:()=>e.toView(t.row)},{default:()=>[p("查看")]}),o(r("el-divider"),{direction:"vertical"},null),o(r("el-button"),{link:!0,type:"primary",onClick:()=>e.toEdit(t.row)},{default:()=>[p("编辑")]})])}],request:()=>{a.loading=!0,k.post("/mock/data",{size:a.page.pageSize}).then(t=>{a.data=t.data.list,a.page.total=t.data.total,a.loading=!1})}});return a.request(),(t,l)=>{const b=r("AgelFormGrid"),d=r("ElButton"),f=r("ElForm"),g=r("AgelTable"),v=r("AgelFormDesc"),h=r("ElDialog");return w(),x("div",V,[C(o(f,{ref:s=>n.ref=s,model:n.model,"label-width":"80px"},{default:i(()=>[o(b,{items:n.items,responsive:""},null,8,["items"]),m("div",A,[o(d,{icon:"RefreshRight",onClick:l[0]||(l[0]=()=>{var s;return(s=n.ref)==null?void 0:s.resetFields()})},{default:i(()=>l[4]||(l[4]=[p("重置")])),_:1}),o(d,{type:"primary",icon:"Search",onClick:a.request},{default:i(()=>l[5]||(l[5]=[p("查询")])),_:1},8,["onClick"])])]),_:1},8,["model"]),[[_,n.show]]),m("div",q,[m("div",null,[o(d,{icon:"Plus",onClick:e.toAdd},{default:i(()=>l[6]||(l[6]=[p("新增")])),_:1},8,["onClick"]),o(d,{icon:"Delete"},{default:i(()=>l[7]||(l[7]=[p("删除")])),_:1})]),m("div",null,[o(d,{icon:"Refresh",round:"",onClick:a.request},null,8,["onClick"]),o(d,{icon:"Search",round:"",onClick:l[1]||(l[1]=s=>n.show=!n.show)})])]),o(g,y({class:"flex-1"},a,{page:a.page,"onUpdate:page":l[2]||(l[2]=s=>a.page=s)}),null,16,["page"]),o(h,{modelValue:e.show,"onUpdate:modelValue":l[3]||(l[3]=s=>e.show=s),title:e.title,width:"800px",top:"10vh"},{footer:i(()=>[e.state!=="view"?(w(),E(d,{key:0,type:"primary",onClick:e.submit},{default:i(()=>l[8]||(l[8]=[p("提交")])),_:1},8,["onClick"])):F("",!0)]),default:i(()=>[o(f,{ref:s=>e.ref=s,model:e.model,"label-width":"80px"},{default:i(()=>[o(v,{items:e.items,"view-model":e.state=="view"},null,8,["items","view-model"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}};export{T as default};
