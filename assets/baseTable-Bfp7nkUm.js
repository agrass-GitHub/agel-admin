import{r as g,b as u,n as f,d as l,e as a,f as d,h as y,o as h,c as C,w as E,v as F,g as s,a as m,m as V,i as A,j as q}from"./index-D16vEmoN.js";const B={class:"flex flex-col overflow-auto"},R={class:"flex justify-center mb-3"},D={class:"table-bar flex justify-between items-center mb-3"},N={__name:"baseTable",setup(T){const w=g(),p=u({show:!1,model:{name:"",age:"",email:"",date:""},items:[{label:"姓名",prop:"name"},{label:"年龄",prop:"age",slot:"agel-select",attrs:{options:["12","13"],onChange:t=>{console.log(t)}}},{label:"邮件",prop:"email"},{label:"出生日期",prop:"date",slot:"el-date-picker",attrs:{type:"datetime"}}]}),c=g(),e=u({show:!1,title:"",state:"edit",model:{name:"",age:"",date:"",email:"",decs:""},items:[{label:"姓名",prop:"name",required:!0},{label:"年龄",prop:"age",required:!0},{label:"出生日期",prop:"date",slot:"el-date-picker"},{label:"邮件",span:3,prop:"email"},{label:"介绍",prop:"decs",span:3,attrs:{type:"textarea",rows:5}}],toAdd:()=>{e.show=!0,e.title="新增用户",e.state="add",f(()=>{var t;(t=c.value)==null||t.resetFields()})},toEdit:t=>{e.show=!0,e.title="编辑用户资料",e.state="edit",f(()=>{e.model={...t}})},toView:t=>{e.show=!0,e.title="查看用户资料",e.state="view",f(()=>{e.model={...t}})},submit:()=>{var t;(t=c.value)==null||t.validate().then(()=>{e.show=!1,o.request()})}}),o=u({loading:!1,border:!0,data:[],page:{sortOrder:null,sortProp:"",currentPage:1,pageSize:10,total:0},columns:[{label:"#",type:"selection"},{label:"姓名",prop:"name",sortable:"custom",width:100},{label:"年龄",prop:"age",sortable:"custom",width:100},{label:"邮件",prop:"email",width:250},{label:"出生日期",prop:"date",width:150},{label:"介绍",prop:"decs",showOverflowTooltip:!0},{width:"120px",label:"操作",fixed:"right",slot:t=>l("div",null,[l(a("el-button"),{link:!0,type:"primary",onClick:()=>e.toView(t.row)},{default:()=>[d("查看")]}),l(a("el-divider"),{direction:"vertical"},null),l(a("el-button"),{link:!0,type:"primary",onClick:()=>e.toEdit(t.row)},{default:()=>[d("编辑")]})])}],request:()=>{o.loading=!0,y.post("/mock/data",{size:o.page.pageSize}).then(t=>{o.data=t.data.list,o.page.total=t.data.total,o.loading=!1})}});return o.request(),(t,r)=>{const _=a("AgelFormGrid"),i=a("ElButton"),b=a("ElForm"),v=a("AgelTable"),k=a("AgelFormDesc"),x=a("ElDialog");return h(),C("div",B,[E(l(b,{ref_key:"searchRef",ref:w,model:p.model,"label-width":"80px"},{default:s(()=>[l(_,{items:p.items,responsive:""},null,8,["items"]),m("div",R,[l(i,{icon:"RefreshRight",onClick:r[0]||(r[0]=()=>{var n;return(n=w.value)==null?void 0:n.resetFields()})},{default:s(()=>[d("重置")]),_:1}),l(i,{type:"primary",icon:"Search",onClick:o.request},{default:s(()=>[d("查询")]),_:1},8,["onClick"])])]),_:1},8,["model"]),[[F,p.show]]),m("div",D,[m("div",null,[l(i,{icon:"Plus",onClick:e.toAdd},{default:s(()=>[d("新增")]),_:1},8,["onClick"]),l(i,{icon:"Delete"},{default:s(()=>[d("删除")]),_:1})]),m("div",null,[l(i,{icon:"Refresh",round:"",onClick:o.request},null,8,["onClick"]),l(i,{icon:"Search",round:"",onClick:r[1]||(r[1]=n=>p.show=!p.show)})])]),l(v,V({class:"flex-1"},o,{page:o.page,"onUpdate:page":r[2]||(r[2]=n=>o.page=n)}),null,16,["page"]),l(x,{modelValue:e.show,"onUpdate:modelValue":r[3]||(r[3]=n=>e.show=n),title:e.title,width:"800px",top:"10vh"},{footer:s(()=>[e.state!=="view"?(h(),A(i,{key:0,type:"primary",onClick:e.submit},{default:s(()=>[d("提交")]),_:1},8,["onClick"])):q("",!0)]),default:s(()=>[l(b,{ref_key:"formRef",ref:c,model:e.model,"label-width":"80px"},{default:s(()=>[l(k,{items:e.items,"view-model":e.state=="view"},null,8,["items","view-model"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}};export{N as default};
