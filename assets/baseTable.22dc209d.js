import{d as C,r as h,b as c,o as g,c as y,w as E,v as F,e as l,f as a,a as m,m as V,g as s,n as f,h as d,i as A,j as q,k as B}from"./index.58946262.js";const R={class:"flex flex-col overflow-hidden"},D={class:"flex justify-center mb-3"},T={class:"table-bar flex justify-between items-center mb-3"},P=C({__name:"baseTable",setup(S){const w=h(),p=c({show:!1,model:{name:"",age:"",email:"",date:""},items:[{label:"\u59D3\u540D",prop:"name"},{label:"\u5E74\u9F84",prop:"age"},{label:"\u90AE\u4EF6",prop:"email"},{label:"\u51FA\u751F\u65E5\u671F",prop:"date",slot:"el-date-picker"}]}),u=h(),e=c({show:!1,title:"",state:"edit",model:{name:"",age:"",date:"",email:"",decs:""},items:[{label:"\u59D3\u540D",prop:"name",required:!0},{label:"\u5E74\u9F84",prop:"age",required:!0},{label:"\u51FA\u751F\u65E5\u671F",prop:"date",slot:"el-date-picker"},{label:"\u90AE\u4EF6",span:3,prop:"email"},{label:"\u4ECB\u7ECD",prop:"decs",span:3,attrs:{type:"textarea",rows:5}}],toAdd:()=>{e.show=!0,e.title="\u65B0\u589E\u7528\u6237",e.state="add",f(()=>{var t;(t=u.value)==null||t.resetFields()})},toEdit:t=>{e.show=!0,e.title="\u7F16\u8F91\u7528\u6237\u8D44\u6599",e.state="edit",f(()=>{e.model={...t}})},toView:t=>{e.show=!0,e.title="\u67E5\u770B\u7528\u6237\u8D44\u6599",e.state="view",f(()=>{e.model={...t}})},submit:()=>{var t;(t=u.value)==null||t.validate().then(()=>{e.show=!1,o.request()})}}),o=c({loading:!1,border:!0,data:[],page:{sortOrder:null,sortProp:"",currentPage:1,pageSize:10,total:0},columns:[{label:"#",type:"selection"},{label:"\u59D3\u540D",prop:"name",sortable:"custom",width:100},{label:"\u5E74\u9F84",prop:"age",sortable:"custom",width:100},{label:"\u90AE\u4EF6",prop:"email",width:250},{label:"\u51FA\u751F\u65E5\u671F",prop:"date",width:150},{label:"\u4ECB\u7ECD",prop:"decs",showOverflowTooltip:!0},{width:"120px",label:"\u64CD\u4F5C",fixed:"right",slot:t=>l("div",null,[l(s("el-button"),{link:!0,type:"primary",onClick:()=>e.toView(t.row)},{default:()=>[d("\u67E5\u770B ")]}),l(s("el-divider"),{direction:"vertical"},null),l(s("el-button"),{link:!0,type:"primary",onClick:()=>e.toEdit(t.row)},{default:()=>[d(" \u7F16\u8F91")]})])}],request:()=>{o.loading=!0,A.post("/mock/data",{size:o.page.pageSize}).then(t=>{o.data=t.data.list,o.page.total=t.data.total,o.loading=!1})}});return o.request(),(t,r)=>{const _=s("AgelFormGrid"),i=s("ElButton"),b=s("ElForm"),v=s("AgelTable"),k=s("AgelFormDesc"),x=s("ElDialog");return g(),y("div",R,[E(l(b,{ref_key:"searchRef",ref:w,model:p.model,"label-width":"80px"},{default:a(()=>[l(_,{items:p.items,responsive:""},null,8,["items"]),m("div",D,[l(i,{icon:"RefreshRight",onClick:r[0]||(r[0]=()=>{var n;return(n=w.value)==null?void 0:n.resetFields()})},{default:a(()=>[d("\u91CD\u7F6E")]),_:1}),l(i,{type:"primary",icon:"Search",onClick:o.request},{default:a(()=>[d("\u67E5\u8BE2")]),_:1},8,["onClick"])])]),_:1},8,["model"]),[[F,p.show]]),m("div",T,[m("div",null,[l(i,{icon:"Plus",onClick:e.toAdd},{default:a(()=>[d("\u65B0\u589E")]),_:1},8,["onClick"]),l(i,{icon:"Delete"},{default:a(()=>[d("\u5220\u9664")]),_:1})]),m("div",null,[l(i,{icon:"Refresh",round:"",onClick:o.request},null,8,["onClick"]),l(i,{icon:"Search",round:"",onClick:r[1]||(r[1]=n=>p.show=!p.show)})])]),l(v,V({class:"flex-1"},o,{page:o.page,"onUpdate:page":r[2]||(r[2]=n=>o.page=n)}),null,16,["page"]),l(x,{modelValue:e.show,"onUpdate:modelValue":r[3]||(r[3]=n=>e.show=n),title:e.title,width:"800px",top:"10vh"},{footer:a(()=>[e.state!=="view"?(g(),q(i,{key:0,type:"primary",onClick:e.submit},{default:a(()=>[d("\u63D0\u4EA4")]),_:1},8,["onClick"])):B("",!0)]),default:a(()=>[l(b,{ref_key:"formRef",ref:u,model:e.model,"label-width":"80px"},{default:a(()=>[l(k,{items:e.items,"view-model":e.state=="view"},null,8,["items","view-model"])]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}});export{P as default};
